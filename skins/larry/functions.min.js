var a=rcmail.env.happinessmenu_options;$(document).ready(()=>{window.rcmail&&rcmail.addEventListener('init',function(A){rcmail.register_command('plugin.happiness',function(B){rcmail.env.happiness_description=B.desc;rcmail.env.happiness_index=B.value;var C={};C.index=B.value;C.description=B.desc;document.cookie=`happiness=${JSON.stringify(C)};`},!0);b('happiness','Happiness Index...','Happiness');var _=document.getElementsByTagName('body')[0];_.appendChild(c('happiness','Select an Happiness Index','select'))})});function b(_a,_b,_c){var d=document.getElementById('messagetoolbar'),e=document.createElement('a');e.setAttribute('href',`#${_a}`);e.classList.add('button');e.classList.add(_a);e.setAttribute('label',_a);e.setAttribute('title',_b);e.setAttribute('id',`${_a}menulink`);e.setAttribute('unselectable','on');e.setAttribute('onmousedown','return false');e.setAttribute('onclick',`UI.toggle_popup('${_a}menu', event); return false`);e.setAttribute('tabindex','3');e.setAttribute('aria-haspopup','true');e.setAttribute('aria-expanded','false');e.setAttribute('aria-owns',`${_a}menu`);var f=document.createElement('span');f.classList.add('inner');f.textContent=f.innerHTML=_c;e.appendChild(f);d.appendChild(e)}function c(D,_B,_C){var _d=document.createElement('div'),F=document.createElement('ul'),h=document.createElement('ul');_d.setAttribute('id',`${D}menu`);_d.classList.add('popupmenu');_d.setAttribute('aria-hidden',!0);var E=document.createElement('h3');E.setAttribute('id',`aria-label-${D}menu`);E.classList.add('voice');E.textContent=`Canned ${D} menu`;F.classList.add('toolbarmenu');F.setAttribute('id',`text${D}menu`);F.setAttribute('role','menu');F.setAttribute('aria-labelledby',`aria-label-${D}menu`);var g=document.createElement('li');g.setAttribute('role','separator');g.classList.add('separator');g.setAttribute('id','');F.appendChild(g);h.setAttribute('id',`${D}list`);for(var i in a){var j=document.createElement('li'),k=document.createElement('a');k.setAttribute('href','#'+D+'-'+a[i]);k.classList.add(_C+D);k.classList.add('active');k.setAttribute('unselectable','on');k.setAttribute('tabindex',0);k.setAttribute('onclick','return rcmail.command(\'plugin.happiness\', {desc: \''+i+'\', value: \''+a[i]+'\'}, this, event ) ');k.textContent=k.innerHTML=i;j.appendChild(k);h.appendChild(j)}F.appendChild(h);_d.appendChild(E);_d.appendChild(F);return _d}
